<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Aaron Purnomo Murniadi's blog - QA Software Engineer sharing insights on technology, coding, and philosophy">
    <meta name="author" content="Aaron Purnomo Murniadi">
    <meta name="theme-color" content="#282A36">
    <meta name="color-scheme" content="dark light">

    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

    <!-- Critical CSS inline -->
    <style>
        /* Critical above-the-fold styles */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html {
            font-size: clamp(14px, 2.5vw, 16px)
        }

        body {
            font-family: 'Minion Variable Concept', 'Times New Roman', Times, Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif;
            font-display: swap;
            margin: 0 auto;
            max-width: 79ch;
            padding: 1.5ch;
            background-color: #282A36;
            color: #cecece;
            line-height: 1.4;
            display: flex;
            flex-direction: column;
            text-align: justify;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #282A36;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        .spinner {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .spinner-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 3px solid rgba(206, 206, 206, 0.2);
            border-top: 3px solid #cecece;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .main-content {
            opacity: 0;
            transition: opacity 0.8s ease-in
        }

        .main-content.loaded {
            opacity: 1
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none
        }

        header {
            padding: 1ch 0em;
        }

        nav {
            text-align: left;
            line-height: 1.5em;
            border-bottom: 1px solid #222;
        }

        nav a:not(:last-child) {
            margin-right: 1ch;
        }

        h1 {
            font-weight: 600;
            margin-top: 4rem;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            line-height: 1.25;
            text-align: left;
        }

        a,
        a:visited {
            color: inherit;
            text-decoration: none;
            transition: text-shadow 0.3s ease;
        }

        @media (prefers-color-scheme: light) {
            body {
                background-color: #f3f4f6;
                color: #1f2937
            }

            .loading-overlay {
                background-color: #f3f4f6
            }

            .spinner-ring {
                border: 3px solid rgba(31, 41, 55, 0.2);
                border-top: 3px solid #1f2937;
            }

            nav {
                border-bottom-color: #d1d5db;
            }
        }
    </style>

    <title>Shell function to help with Python's Virtual Environment - My Blog</title>
    <link rel="stylesheet" href="static/style.css" media="print"
        onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="static/style.css">
    </noscript>

    <!-- Load MathJax only when needed -->
    

    <!-- Additional performance optimizations -->
    <link rel="preload" href="static/style.css" as="style">
    <link rel="preload" href="static/script.js" as="script">

    <!-- Favicon and app icons -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">

    
</head>
<body>
    <!-- Loading spinner -->
    <div id="loading-spinner" class="loading-overlay" aria-label="Loading content" role="status">
        <div class="spinner">
            <div class="spinner-ring"></div>
        </div>
    </div>

    <!-- Main content wrapper -->
    <div id="main-content" class="main-content">
        <header>
            <a class="title" href="index.html" aria-label="Go to homepage">
                <h1>aaron-pm</h1>
            </a>
            <nav role="navigation" aria-label="Main navigation">
                <p>
                    
                    <a href="index.html">Home</a>
                    
                    <a href="contact/index.html">Contact</a>
                    
                    <a href="typst-collection/index.html">Typst-Collection</a>
                    
                    <a href="https://github.com/aaronmurniadi/cv-typst/releases/latest/download/aaron_murniadi_cv.pdf"
                        aria-label="Open CV (PDF) in new tab" target="_blank" rel="noopener">CV</a>
                </p>
            </nav>
        </header>

        <main id="main" role="main">
            
<article class="post">
    <div id="footnote-tooltip" style="display: none;"></div>

    <h1>Shell function to help with Python's Virtual Environment</h1>
    
    
    <p><time datetime="2025-08-20 16:27:15.583807">2025-08-20 16:27:15.583807</time></p>
    
    
    <div class="post-content">
        <p>Managing Python projects often involves juggling multiple dependencies and Python versions. Virtual environments are a lifesaver, allowing you to isolate project dependencies and avoid conflicts. While Python&rsquo;s <code>venv</code> module is excellent, creating and activating environments can be a bit repetitive. To streamline this process, I&rsquo;ve created a simple Bash function called <code>ve()</code> that simplifies virtual environment management:</p>
<div class="codehilite"><pre><span></span><code>ve<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">py</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">python3</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">venv</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="p">.venv</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">venv_path</span><span class="o">=</span><span class="s2">&quot;./</span><span class="si">${</span><span class="nv">venv</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">activate_script</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">venv_path</span><span class="si">}</span><span class="s2">/bin/activate&quot;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VIRTUAL_ENV</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Already in a virtual environment: </span><span class="nv">$VIRTUAL_ENV</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$venv_path</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Creating virtual environment: </span><span class="nv">$venv_path</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="s2">&quot;</span><span class="nv">$py</span><span class="s2">&quot;</span><span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$venv_path</span><span class="s2">&quot;</span><span class="w"> </span>--system-site-packages<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>

<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PYTHON=</span><span class="nv">$py</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$activate_script</span><span class="s2">&quot;</span>

<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Upgrading pip in new virtual environment...&quot;</span>
<span class="w">        </span><span class="nb">source</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$activate_script</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="s2">&quot;</span><span class="nv">$py</span><span class="s2">&quot;</span><span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span>deactivate<span class="w"> </span><span class="c1"># Deactivate to avoid confusion</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Virtual environment created and pip upgraded.&quot;</span>

<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Activating existing virtual environment: </span><span class="nv">$venv_path</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">source</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$activate_script</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Virtual environment activated.&quot;</span>
<span class="o">}</span>
</code></pre></div>

<p>The function first checks if a virtual environment is already active by looking for the <code>VIRTUAL_ENV</code> environment variable. If we&rsquo;re in a virtual environment already, the script will exit gracefully.</p>
<p>If we are not in a virtual environment AND there&rsquo;s no <code>.venv</code> folder found in the current directory, it will create a new virtual environment and then activates the environment.</p>
<p>Finally, it upgrades pip within the new virtual environment to ensure you have the latest version.</p>
<p>You can add this function to your shell configuration like <code>.bashrc</code>, <code>.zshrc</code>, or equivalent shell configuration file. This will make the <code>ve()</code> function available in your terminal.</p>
    </div>
    
    
    
    <nav class="post-navigation">
        
        <div class="nav-links">
            
            <div class="nav-previous">
                <a href="2025-02-12-notes-from-so-you-think-you-know-git-fosdem-2024.html" rel="prev">
                    ‚Üê Notes from "So You Think You Know Git - FOSDEM 2024"
                </a>
            </div>
            
            
            
            <div class="nav-next">
                <a href="2025-02-14-time-to-tidy-up-your-github-graveyard.html" rel="next">
                    Time to tidy up your GitHub graveyard! ‚Üí
                </a>
            </div>
            
        </div>
        
    </nav>
</article>

        </main>

        <footer>
            <p class="copyright">¬© 2025 Aaron P. Murniadi</p>
            <script async src="static/script.js"></script>
        </footer>
    </div> <!-- End main-content wrapper -->
    </body>

</html>